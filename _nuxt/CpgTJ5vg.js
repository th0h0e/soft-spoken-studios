import{r as q,a1 as M,bX as F,ba as U,an as j,ay as J,az as X,ax as G,a as K,x as Q,W as T,aC as H,u as Y,c as f,d,f as c,w as C,g as p,n as s,F as L,a5 as Z,a2 as _,e as v,ai as ee,ae as n,ad as m,t as R,aM as te,aJ as ae,as as N,a3 as le,q as ie}from"./CJaI3g8a.js";import{b as se,a as ne,C as oe}from"./BLLbbh19.js";import{c as P}from"./CXUXqAzG.js";function re(){const t=q(),o=q([]),e=q([]);function w(g){g.forEach(h=>{const y=h.target.id;y&&(h.isIntersecting?o.value=[...o.value,y]:o.value=o.value.filter(I=>I!==y))})}function k(g){g.forEach(h=>{t.value&&t.value.observe(h)})}return M(o,(g,h)=>{g.length===0?e.value=h:e.value=g}),F(()=>t.value=new IntersectionObserver(w)),U(()=>t.value?.disconnect()),{visibleHeadings:o,activeHeadings:e,updateHeadings:k}}const ce={slots:{root:"sticky top-(--ui-header-height) z-10 bg-default/75 lg:bg-[initial] backdrop-blur -mx-4 px-4 sm:px-6 sm:-mx-6 overflow-y-auto max-h-[calc(100vh-var(--ui-header-height))]",container:"pt-4 sm:pt-6 pb-2.5 sm:pb-4.5 lg:py-8 border-b border-dashed border-default lg:border-0 flex flex-col",top:"",bottom:"hidden lg:flex lg:flex-col gap-6",trigger:"group text-sm font-semibold flex-1 flex items-center gap-1.5 py-1.5 -mt-1.5 focus-visible:outline-primary",title:"truncate",trailing:"ms-auto inline-flex gap-1.5 items-center",trailingIcon:"size-5 transform transition-transform duration-200 shrink-0 group-data-[state=open]:rotate-180 lg:hidden",content:"data-[state=open]:animate-[collapsible-down_200ms_ease-out] data-[state=closed]:animate-[collapsible-up_200ms_ease-out] overflow-hidden focus:outline-none",list:"min-w-0",listWithChildren:"ms-3",item:"min-w-0",itemWithChildren:"",link:"group relative text-sm flex items-center focus-visible:outline-primary py-1",linkText:"truncate",indicator:"absolute ms-2.5 transition-[translate,height] duration-200 h-(--indicator-size) translate-y-(--indicator-position) w-px rounded-full"},variants:{color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},highlightColor:{primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},info:{indicator:"bg-info"},warning:{indicator:"bg-warning"},error:{indicator:"bg-error"},neutral:{indicator:"bg-inverted"}},active:{false:{link:["text-muted hover:text-default","transition-colors"]}},highlight:{true:{list:"ms-2.5 ps-4 border-s border-default",item:"-ms-px"}},body:{true:{bottom:"mt-6"}}},compoundVariants:[{color:"primary",active:!0,class:{link:"text-primary",linkLeadingIcon:"text-primary"}},{color:"secondary",active:!0,class:{link:"text-secondary",linkLeadingIcon:"text-secondary"}},{color:"success",active:!0,class:{link:"text-success",linkLeadingIcon:"text-success"}},{color:"info",active:!0,class:{link:"text-info",linkLeadingIcon:"text-info"}},{color:"warning",active:!0,class:{link:"text-warning",linkLeadingIcon:"text-warning"}},{color:"error",active:!0,class:{link:"text-error",linkLeadingIcon:"text-error"}},{color:"neutral",active:!0,class:{link:"text-highlighted",linkLeadingIcon:"text-highlighted"}}],defaultVariants:{color:"primary",highlightColor:"primary"}},ue=["href","onClick"],pe=Object.assign({inheritAttrs:!1},{__name:"UContentToc",props:{as:{type:null,required:!1,default:"nav"},trailingIcon:{type:null,required:!1},title:{type:String,required:!1},color:{type:null,required:!1},highlight:{type:Boolean,required:!1},highlightColor:{type:null,required:!1},links:{type:Array,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1}},emits:["update:open","move"],setup(t,{emit:o}){const e=t,w=o,k=j(),g=J(X(e,"as","open","defaultOpen"),w),{t:h}=G(),y=K(),I=Q(),{activeHeadings:b,updateHeadings:A}=re(),[V,$]=P({props:{links:Array,level:Number}}),[O,W]=P(),a=T(()=>H({extend:H(ce),...I.ui?.contentToc||{}})({color:e.color,highlight:e.highlight,highlightColor:e.highlightColor||e.color}));function D(l){const u=encodeURIComponent(l);y.push(`#${u}`),w("move",l)}function S(l){return l.flatMap(u=>[u,...u.children?S(u.children):[]])}const B=T(()=>{if(!b.value?.length)return;const u=S(e.links||[]).findIndex(i=>b.value.includes(i.id)),r=28,x=0;return{"--indicator-size":`${r*b.value.length+x*(b.value.length-1)}px`,"--indicator-position":u>=0?`${u*(r+x)}px`:"0px"}}),z=Y();return z.hooks.hook("page:loading:end",()=>{const l=Array.from(document.querySelectorAll("h2, h3"));A(l)}),z.hooks.hook("page:transition:finish",()=>{const l=Array.from(document.querySelectorAll("h2, h3"));A(l)}),(l,u)=>(d(),f(L,null,[c(n(V),null,{default:C(({links:r,level:x})=>[p("ul",{class:s(x>0?a.value.listWithChildren({class:e.ui?.listWithChildren}):a.value.list({class:e.ui?.list}))},[(d(!0),f(L,null,Z(r,(i,E)=>(d(),f("li",{key:E,class:s(i.children&&i.children.length>0?a.value.itemWithChildren({class:[e.ui?.itemWithChildren,i.ui?.itemWithChildren]}):a.value.item({class:[e.ui?.item,i.ui?.item]}))},[p("a",{href:`#${i.id}`,"data-slot":"link",class:s(a.value.link({class:[e.ui?.link,i.ui?.link,i.class],active:n(b).includes(i.id)})),onClick:ee(de=>D(i.id),["prevent"])},[m(l.$slots,"link",{link:i},()=>[p("span",{"data-slot":"linkText",class:s(a.value.linkText({class:[e.ui?.linkText,i.ui?.linkText]}))},R(i.text),3)])],10,ue),i.children?.length?(d(),_(n($),{key:0,links:i.children,level:x+1},null,8,["links","level"])):v("",!0)],2))),128))],2)]),_:3}),c(n(O),null,{default:C(({open:r})=>[m(l.$slots,"leading",{open:r,ui:a.value}),p("span",{"data-slot":"title",class:s(a.value.title({class:e.ui?.title}))},[m(l.$slots,"default",{open:r},()=>[te(R(t.title||n(h)("contentToc.title")),1)])],2),p("span",{"data-slot":"trailing",class:s(a.value.trailing({class:e.ui?.trailing}))},[m(l.$slots,"trailing",{open:r,ui:a.value},()=>[c(ae,{name:t.trailingIcon||n(I).ui.icons.chevronDown,"data-slot":"trailingIcon",class:s(a.value.trailingIcon({class:e.ui?.trailingIcon}))},null,8,["name","class"])])],2)]),_:3}),c(n(oe),le({...n(g),...l.$attrs},{"default-open":t.defaultOpen,"data-slot":"root",class:a.value.root({class:[e.ui?.root,e.class]})}),{default:C(({open:r})=>[p("div",{"data-slot":"container",class:s(a.value.container({class:e.ui?.container}))},[k.top?(d(),f("div",{key:0,"data-slot":"top",class:s(a.value.top({class:e.ui?.top}))},[m(l.$slots,"top",{links:t.links})],2)):v("",!0),t.links?.length?(d(),f(L,{key:1},[c(n(se),{"data-slot":"trigger",class:s(a.value.trigger({class:"lg:hidden"}))},{default:C(()=>[c(n(W),{open:r},null,8,["open"])]),_:2},1032,["class"]),c(n(ne),{"data-slot":"content",class:s(a.value.content({class:[e.ui?.content,"lg:hidden"]}))},{default:C(()=>[t.highlight?(d(),f("div",{key:0,"data-slot":"indicator",class:s(a.value.indicator({class:e.ui?.indicator})),style:N(B.value)},null,6)):v("",!0),m(l.$slots,"content",{links:t.links},()=>[c(n($),{links:t.links,level:0},null,8,["links"])])]),_:3},8,["class"]),p("p",{"data-slot":"trigger",class:s(a.value.trigger({class:"hidden lg:flex"}))},[c(n(W),{open:r},null,8,["open"])],2),p("div",{"data-slot":"content",class:s(a.value.content({class:[e.ui?.content,"hidden lg:flex"]}))},[t.highlight?(d(),f("div",{key:0,"data-slot":"indicator",class:s(a.value.indicator({class:e.ui?.indicator})),style:N(B.value)},null,6)):v("",!0),m(l.$slots,"content",{links:t.links},()=>[c(n($),{links:t.links,level:0},null,8,["links"])])],2)],64)):v("",!0),k.bottom?(d(),f("div",{key:2,"data-slot":"bottom",class:s(a.value.bottom({class:e.ui?.bottom,body:!!k.top||!!t.links?.length}))},[m(l.$slots,"bottom",{links:t.links})],2)):v("",!0)],2)]),_:3},16,["default-open","class"])],64))}}),me=()=>{const t=ie(),o=T(()=>t.path.startsWith("/writing/")),e=T(()=>o.value&&t.path!=="/writing/");return{isWritingPage:o,isWritingArticle:e}};export{pe as _,me as u};
