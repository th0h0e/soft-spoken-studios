import{v as m,c as d}from"./CmzFqEqI.js";import{d as T,h as k,e as b,i as P,p as v,s as A}from"./CmzFqEqI.js";import{T as B,f as C,i as H,a as j,b as L,n as _,u as E}from"./iik6CYzq.js";import"./DRto7dDx.js";import"./1m1goCJg.js";function x(i){const t=i;return async r=>{const a=[],h=[];m(r,s=>{const e=s;if(!["pre","code"].includes(e.tagName))return!1;const o=e.properties?.language!==void 0&&e.properties?.language!=="text",n=!!e.properties?.highlights;return o||n},s=>{const e=s,o=typeof e.properties.highlights=="string"?e.properties.highlights.split(/[,\s]+/).map(Number):Array.isArray(e.properties.highlights)?e.properties.highlights.map(Number):[],n=t.highlighter(d(s),e.properties.language,t.theme,{highlights:o.filter(Boolean),meta:e.properties.meta}).then(({tree:p,className:g,style:l,inlineStyle:c})=>{e.properties.className=((e.properties.className||"")+" "+g).trim(),e.properties.style=((e.properties.style||"")+" "+c).trim(),e.children[0]?.tagName==="code"?e.children[0].children=p:e.children=p[0].children||p,l&&h.push(l)});a.push(n)}),a.length&&(await Promise.all(a),r.children.push({type:"element",tagName:"style",children:[{type:"text",value:f(h.join(""))}],properties:{}}))}}const f=i=>{const t=i.split("}").filter(r=>!!r.trim()).map(r=>r.trim()+"}");return Array.from(new Set(t)).join("")};export{B as TEXT_TAGS,T as createMarkdownParser,k as createMarkdownStringifier,b as createParseProcessor,P as createStringifyProcessor,C as flatUnwrap,H as isTag,j as isText,L as nodeChildren,_ as nodeTextContent,v as parseMarkdown,x as rehypeHighlight,A as stringifyMarkdown,E as unwrap};
