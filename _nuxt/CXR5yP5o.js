import{P as y,b$ as O,aw as m,N as R,O as j,a3 as k,Y as h,c0 as C,o as W,bk as _,ag as q,bg as D}from"./Bux1l1NO.js";function G(e,t){return R()?(j(e,t),!0):!1}const $=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const K=e=>typeof e<"u",I=Object.prototype.toString,N=e=>I.call(e)==="[object Object]";function B(e){let t;function a(){return t||(t=e()),t}return a.reset=async()=>{const o=t;t=void 0,o&&await o},a}function S(e){return Array.isArray(e)?e:[e]}function F(e,t,a={}){const{immediate:o=!0,immediateCallback:i=!1}=a,n=y(!1);let u;function f(){u&&(clearTimeout(u),u=void 0)}function v(){n.value=!1,f()}function c(...s){i&&e(),f(),n.value=!0,u=setTimeout(()=>{n.value=!1,u=void 0,e(...s)},m(t))}return o&&(n.value=!0,$&&c()),G(v),{isPending:O(n),start:c,stop:v}}function V(e,t,a){return k(e,t,{...a,immediate:!0})}const Y=$?window:void 0,x=$?window.navigator:void 0;function z(e){var t;const a=m(e);return(t=a?.$el)!==null&&t!==void 0?t:a}function P(...e){const t=(o,i,n,u)=>(o.addEventListener(i,n,u),()=>o.removeEventListener(i,n,u)),a=h(()=>{const o=S(m(e[0])).filter(i=>i!=null);return o.every(i=>typeof i!="string")?o:void 0});return V(()=>{var o,i;return[(o=(i=a.value)===null||i===void 0?void 0:i.map(n=>z(n)))!==null&&o!==void 0?o:[Y].filter(n=>n!=null),S(m(a.value?e[1]:e[0])),S(q(a.value?e[2]:e[1])),m(a.value?e[3]:e[2])]},([o,i,n,u],f,v)=>{if(!o?.length||!i?.length||!n?.length)return;const c=N(u)?{...u}:u,s=o.flatMap(d=>i.flatMap(g=>n.map(b=>t(d,g,b,c))));v(()=>{s.forEach(d=>d())})},{flush:"post"})}function H(){const e=y(!1),t=_();return t&&W(()=>{e.value=!0},t),e}function A(e){const t=H();return h(()=>(t.value,!!e()))}function T(e,t={}){const{controls:a=!1,navigator:o=x}=t,i=A(()=>o&&"permissions"in o),n=y(),u=typeof e=="string"?{name:e}:e,f=y(),v=()=>{var s,d;f.value=(s=(d=n.value)===null||d===void 0?void 0:d.state)!==null&&s!==void 0?s:"prompt"};P(n,"change",v,{passive:!0});const c=B(async()=>{if(i.value){if(!n.value)try{n.value=await o.permissions.query(u)}catch{n.value=void 0}finally{v()}if(a)return D(n.value)}});return c(),a?{state:f,isSupported:i,query:c}:f}function Q(e={}){const{navigator:t=x,read:a=!1,source:o,copiedDuring:i=1500,legacy:n=!1}=e,u=A(()=>t&&"clipboard"in t),f=T("clipboard-read"),v=T("clipboard-write"),c=h(()=>u.value||n),s=y(""),d=y(!1),g=F(()=>d.value=!1,i,{immediate:!1});async function b(){let r=!(u.value&&w(f.value));if(!r)try{s.value=await t.clipboard.readText()}catch{r=!0}r&&(s.value=L())}c.value&&a&&P(["copy","cut"],b,{passive:!0});async function E(r=m(o)){if(c.value&&r!=null){let l=!(u.value&&w(v.value));if(!l)try{await t.clipboard.writeText(r)}catch{l=!0}l&&M(r),s.value=r,d.value=!0,g.start()}}function M(r){const l=document.createElement("textarea");l.value=r,l.style.position="absolute",l.style.opacity="0",l.setAttribute("readonly",""),document.body.appendChild(l),l.select(),document.execCommand("copy"),l.remove()}function L(){var r,l,p;return(r=(l=document)===null||l===void 0||(p=l.getSelection)===null||p===void 0||(p=p.call(l))===null||p===void 0?void 0:p.toString())!==null&&r!==void 0?r:""}function w(r){return r==="granted"||r==="prompt"}return{isSupported:c,text:C(s),copied:C(d),copy:E}}export{Q as a,K as i,z as u};
