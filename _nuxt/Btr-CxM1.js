import{A as m,t as u}from"./ga1Bfngs.js";function f(s){const i=s;return async t=>{const o=[],n=[];m(t,r=>{const e=r;if(!["pre","code"].includes(e.tagName))return!1;const h=e.properties?.language!==void 0&&e.properties?.language!=="text",a=!!e.properties?.highlights;return h||a},r=>{const e=r,h=typeof e.properties.highlights=="string"?e.properties.highlights.split(/[,\s]+/).map(Number):Array.isArray(e.properties.highlights)?e.properties.highlights.map(Number):[],a=i.highlighter(u(r),e.properties.language,i.theme,{highlights:h.filter(Boolean),meta:e.properties.meta}).then(({tree:l,className:g,style:p,inlineStyle:c})=>{e.properties.className=((e.properties.className||"")+" "+g).trim(),e.properties.style=((e.properties.style||"")+" "+c).trim(),e.children[0]?.tagName==="code"?e.children[0].children=l:e.children=l[0].children||l,p&&n.push(p)});o.push(a)}),o.length&&(await Promise.all(o),t.children.push({type:"element",tagName:"style",children:[{type:"text",value:d(n.join(""))}],properties:{}}))}}const d=s=>{const i=s.split("}").filter(t=>!!t.trim()).map(t=>t.trim()+"}");return Array.from(new Set(i)).join("")};export{f as r};
